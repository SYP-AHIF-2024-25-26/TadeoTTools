<div class="my-6 text-center text-2xl text-text-950">
  Data Importing and Exporting
</div>
<div
  class="flex flex-col items-center justify-center gap-y-8 px-4 text-text-950 md:flex-row md:items-start md:gap-x-16"
>
  <div class="my-4 flex w-full flex-col md:w-auto">
    <h1 class="mb-4 text-center text-3xl">Imports</h1>
    <div class="mb-4 flex flex-col gap-4 sm:flex-row">
      <fieldset class="fieldset flex-grow">
        <legend class="fieldset-legend text-lg">Import Student Csv</legend>
        <input
          type="file"
          class="file-input file-input-primary file-input-sm w-full"
          accept=".csv"
          (change)="onStudentFileSelected($event)"
        />
      </fieldset>
      <button
        class="btn btn-primary btn-sm self-center px-4 sm:self-end"
        (click)="submitStudentsCsv()"
        [disabled]="!selectedStudentFile()"
      >
        Import
      </button>
    </div>
    <div
      class="my-2 hidden rounded-lg bg-background-100 p-2 dark:border dark:border-accent-400 md:block"
    >
      <p class="font-mono text-sm text-text-600">
        EdufsUsername;FirstName;LastName;StudentClass;Department
      </p>
    </div>
    <div class="mb-4 flex flex-col gap-4 sm:flex-row">
      <fieldset class="fieldset flex-grow">
        <legend class="fieldset-legend text-lg">Import Teacher Csv</legend>
        <input
          type="file"
          class="file-input file-input-primary file-input-sm w-full"
          accept=".csv"
          (change)="onTeacherFileSelected($event)"
        />
      </fieldset>
      <button
        class="btn btn-primary btn-sm self-center px-4 sm:self-end"
        (click)="submitTeachersCsv()"
        [disabled]="!selectedTeacherFile()"
      >
        Import
      </button>
    </div>
    <div
      class="my-2 hidden rounded-lg bg-background-100 p-2 dark:border dark:border-accent-400 md:block"
    >
      <p class="font-mono text-sm text-text-600">
        EdufsUsername;FirstName;LastName
      </p>
    </div>
  </div>
  <div class="my-4 flex w-full flex-col gap-y-4 md:w-auto">
    <h1 class="mb-4 text-center text-3xl">Exports</h1>
    <button
      (click)="downloadQuestionAnswers()"
      class="btn btn-primary btn-sm w-full md:w-auto md:self-start"
    >
      <svg
        xmlns="http://www.w3.org/2000/svg"
        class="mr-1 h-5 w-5"
        fill="none"
        viewBox="0 0 24 24"
        stroke="currentColor"
      >
        <path
          stroke-linecap="round"
          stroke-linejoin="round"
          stroke-width="2"
          d="M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"
        />
      </svg>
      Download Feedback Answers
    </button>
    <button
      (click)="downloadStudentsData()"
      class="btn btn-primary btn-sm w-full md:w-auto md:self-start"
    >
      <svg
        xmlns="http://www.w3.org/2000/svg"
        class="mr-1 h-5 w-5"
        fill="none"
        viewBox="0 0 24 24"
        stroke="currentColor"
      >
        <path
          stroke-linecap="round"
          stroke-linejoin="round"
          stroke-width="2"
          d="M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"
        />
      </svg>
      Download Students Data
    </button>
    <button
      (click)="downloadStopsData()"
      class="btn btn-primary btn-sm w-full md:w-auto md:self-start"
    >
      <svg
        xmlns="http://www.w3.org/2000/svg"
        class="mr-1 h-5 w-5"
        fill="none"
        viewBox="0 0 24 24"
        stroke="currentColor"
      >
        <path
          stroke-linecap="round"
          stroke-linejoin="round"
          stroke-width="2"
          d="M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"
        />
      </svg>
      Download Stops Data
    </button>
    <button
      (click)="downloadDivisionData()"
      class="btn btn-primary btn-sm w-full md:w-auto md:self-start"
    >
      <svg
        xmlns="http://www.w3.org/2000/svg"
        class="mr-1 h-5 w-5"
        fill="none"
        viewBox="0 0 24 24"
        stroke="currentColor"
      >
        <path
          stroke-linecap="round"
          stroke-linejoin="round"
          stroke-width="2"
          d="M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"
        />
      </svg>
      Download Division Data
    </button>
  </div>
</div>
<div class="mt-8 flex justify-center">
  <button
    class="btn btn-error btn-sm gap-2"
    (click)="showDeleteStudentsPopup.set(true)"
  >
    <svg class="h-3 w-3" fill="none" stroke="currentColor" viewBox="0 0 24 24">
      <path
        stroke-linecap="round"
        stroke-linejoin="round"
        stroke-width="2"
        d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6M9 7h6m2 0a2 2 0 00-2-2H9a2 2 0 00-2 2m10 0H5"
      ></path>
    </svg>
    Delete all Students
  </button>
</div>

@if (showDeleteStudentsPopup()) {
  <app-delete-popup
    [title]="'Delete Students'"
    [message]="'Are you sure you want to delete all students?'"
    (cancel)="showDeleteStudentsPopup.set(false)"
    (removeConfirmed)="deleteAllStudents()"
  />
}
