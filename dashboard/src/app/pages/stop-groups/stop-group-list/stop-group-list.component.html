<app-stop-group-header
  [hasChanged]="hasChanged()"
  [onlyPublicGroups]="onlyPublicGroups()"
  (addGroup)="navigateToNewGroup()"
  (togglePublicGroups)="onlyPublicGroups.set(!onlyPublicGroups())"
  (save)="saveChanges()"
  (cancel)="initialiseData()"
/>

<div class="container mx-auto px-4 py-8">
  <app-stop-group-list
    [stopGroups]="stopGroups()"
    [onlyPublicGroups]="onlyPublicGroups()"
    [stops]="stops()"
    [connectedDropLists]="dropGroups()"
    (dropGroup)="dropGroup($event)"
    (dropStop)="dropStop($event)"
    (removeStop)="selectStopToRemove($event.stopId, $event.group)"
  />
</div>

<!-- Info Notifications -->
<div class="fixed bottom-4 right-4 z-50 space-y-2">
  @for (info of infos(); track info) {
    <app-info-popup
      (deleted)="deleteInfo($event)"
      [info]="info"
    ></app-info-popup>
  }
</div>

<!-- Modal Dialogs -->
@if (showRemoveStopPopup()) {
  <app-delete-popup
    [title]="'Remove Stop'"
    [message]="'Are you sure you want to remove this stop from the stop group?'"
    (cancel)="showRemoveStopPopup.set(false)"
    (removeConfirmed)="removeStop()"
  />
}

@if (showAddStopDropDownPopup()) {
  <app-add-stop-dialog
    [stops]="stopsNotInStopGroup()"
    (close)="showAddStopDropDownPopup.set(false)"
    (addStop)="addStopBtnClick($event)"
  />
}
