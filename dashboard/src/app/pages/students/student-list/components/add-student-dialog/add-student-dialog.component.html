<div
  class="fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50"
>
  <div
    class="w-full max-w-xl rounded-lg bg-white p-6 shadow-lg dark:bg-background-800"
  >
    <div class="mb-4 flex items-center justify-between">
      <h3 class="text-xl font-bold">Add Student</h3>
      <button class="btn btn-circle btn-sm" (click)="close.emit()">âœ•</button>
    </div>

    @if (addStudentError()) {
      <div class="alert alert-error mb-4" role="alert">
        <svg
          xmlns="http://www.w3.org/2000/svg"
          class="h-6 w-6 shrink-0 stroke-current"
          fill="none"
          viewBox="0 0 24 24"
        >
          <path
            stroke-linecap="round"
            stroke-linejoin="round"
            stroke-width="2"
            d="M10 14l2-2m0 0l2-2m-2 2l-2-2m2 2l2 2M12 8v.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"
          />
        </svg>
        <span>{{ addStudentError() }}</span>
      </div>
    }

    <div class="grid grid-cols-1 gap-4 md:grid-cols-2">
      <div class="form-control md:col-span-2">
        <label class="label"
          ><span class="label-text">EduFS Username</span></label
        >
        <input
          class="input input-bordered"
          [(ngModel)]="newStudent.edufsUsername"
          placeholder="e.g. if123456"
        />
      </div>
      <div class="form-control">
        <label class="label"><span class="label-text">First Name</span></label>
        <input
          class="input input-bordered"
          [(ngModel)]="newStudent.firstName"
          placeholder="First name"
        />
      </div>
      <div class="form-control">
        <label class="label"><span class="label-text">Last Name</span></label>
        <input
          class="input input-bordered"
          [(ngModel)]="newStudent.lastName"
          placeholder="Last name"
        />
      </div>
      <div class="form-control">
        <label class="label"><span class="label-text">Class</span></label>
        <input
          class="input input-bordered"
          [(ngModel)]="newStudent.studentClass"
          placeholder="e.g. 5AHIF"
        />
      </div>
      <div class="form-control">
        <label class="label"><span class="label-text">Department</span></label>
        <select
          class="select select-bordered w-full bg-primary-300 hover:bg-primary-400"
          [(ngModel)]="newStudent.department"
        >
          <option value="">Select department</option>
          @for (dep of uniqueDepartments(); track dep) {
            <option [value]="dep">{{ dep }}</option>
          }
        </select>
      </div>
    </div>

    <div class="mt-6 flex justify-end gap-2">
      <button class="btn btn-ghost" (click)="close.emit()">Cancel</button>
      <button
        class="btn btn-primary"
        (click)="saveNewStudent()"
        [disabled]="
          !newStudent.edufsUsername ||
          !newStudent.firstName ||
          !newStudent.lastName ||
          !newStudent.studentClass ||
          !newStudent.department
        "
      >
        Save
      </button>
    </div>
  </div>
</div>
