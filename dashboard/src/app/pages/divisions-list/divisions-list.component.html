<div class="m-4 flex h-screen w-full flex-col items-center text-text-950">
  <div class="mx-10 flex flex-wrap gap-5">
    @for (division of divisionStore.getDivisions(); track $index) {
      <div
        class="m-2 flex w-64 flex-col flex-wrap justify-between rounded-lg bg-background-100 p-6 shadow-lg shadow-secondary-200 dark:border dark:border-white"
      >
        <div class="flex flex-nowrap justify-evenly">
          <div class="flex w-3/4">
            <p class="font-bold">{{ division.name }}</p>
          </div>
          <div class="m-auto h-8 w-8 self-end justify-self-end rounded-md" [style.background-color]="division.color"></div>
        </div>
        <img
          class="h-32 w-32 object-cover"
          [src]="baseUrl + '/divisions/' + division.id + '/image?timestamp=1234567890'"
          (error)="hideImage($event)"
        />
        <div class="flex">
          <button
            class="my-1 mt-4 rounded bg-primary-200 p-2 shadow-lg hover:bg-primary-300"
            [routerLink]="['/division']"
            [queryParams]="{
              id: division.id,
            }"
          >
            Details
          </button>
          <button class="my-1 ml-auto mt-4 rounded bg-accent-200 p-2 shadow-lg hover:bg-accent-300" (click)="showDeletePopup(division.id)">
            Delete
          </button>
        </div>
      </div>
    }
  </div>
  <button class="ml-12 mt-5 rounded border border-transparent bg-primary-200 p-2 hover:bg-primary-300" [routerLink]="['/division']">
    New Division
  </button>
</div>

@if (showRemoveDivisionPopup()) {
  <app-delete-popup
    [title]="'Delete Division'"
    [message]="'Are you sure you want to delete this division?'"
    (cancel)="showRemoveDivisionPopup.set(false)"
    (removeConfirmed)="deleteDivision()"
  />
}
